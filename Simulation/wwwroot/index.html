<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register form</title>
    <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="lib/font-awesome/css/all.min.css">
</head>
<body>
    <div class="container border rounded mt-5 ml-auto" style="min-width: 300px; max-width: 450;">
        <h1 class="mt-3 h3 text-center">Create account</h1>
        <form action="/" method="post">
            <div class="form-group" id="EmailBlock">
                <label for="Email">Email</label>
                <input type="email" name="Email" id="Email" class="form-control" placeholder="Email" onblur="CheckEmail(this);" autofocus />
                <div class="valid-feedback" id="EmailFeedback">Well done!</div>
            </div>
            <label for="Password">Password</label>
            <input type="password" id="Password" name="Password" class="form-control" placeholder="Password" onblur="CheckPassword(this);" />
            <label for="ConfirmPassword">Confirm password</label>
            <input type="password" id="ConfirmPassword" name="ConfirmPassword" class="form-control" placeholder="Confirm password" onchange="CheckConfirm(this,'Password');" />
            <button type="submit" class="btn btn-block btn-primary">Register</button>
        </form>
    </div>
    <script type="text/javascript" src="lib/jquery/jquery-3.5.0.slim.min.js"></script>
    <script type="text/javascript" src="lib/font-awesome/js/all.min.js"></script>
    <script type="text/javascript" src="lib/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        function ResetInput(object) {
            object.classList.remove('is-valid');
            object.classList.remove('is-invalid');
        }
        function SetInputState(object, state) {
            ResetInput(object);
            if(state == 'invalid') {
                object.classList.add('is-invalid');
            }
            else if(state == 'valid') {
                object.classList.add('is-valid');
            }
        }
        function ResetBlock(object) {
            object.classList.remove('has-danger');
            object.classList.remove('has-success');
        }
        function SetBlockState(object, state) {
            ResetFormgroup(object);
            if(state == 'valid') {
                object.classList.add('has-success');
            }
            else if(state == 'invalid'){
                object.classList.add('has-danger');
            }
            else {
                ResetFormgroup(object);
            }
        }
        function ResetFeedback(object) {
            object.classList.remove('valid-feedback');
            object.classList.remove('invalid-feedback');
        }
        function SetFeedbackState(object, state) {
            ResetFeedback(object);
            if(state == 'invalid') {
                object.classList.add('invalid-feedback');
            }
            else if(state == 'valid') {
                object.classList.add('valid-feedback');
            }
            else {
                ResetFeedback(object);
            }
        }
        function CheckEmail(object) {
            const re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            var objectBlock = document.getElementById(object + 'Block');
            var objectFeedback = document.getElementById(object + 'Feedback');
            ResetBlock(objectBlock);
            ResetInput(object);
            ResetFeedback(objectFeedback);
            if (re.test(object.val)) {
                SetBlockState(objectBlock, 'valid');
                SetInputState(object, 'valid');
                SetFeedbackState(objectFeedback, 'valid');
                objectFeedback.value = 'Success!';
            }
            else {
                SetBlockState(objectBlock, 'invalid');
                SetInputState(object, 'invalid');
                SetFeedbackState(objectFeedback, 'invalid');
                objectFeedback.value = 'Error!';
            }
        }
    </script>
</body>
</html>