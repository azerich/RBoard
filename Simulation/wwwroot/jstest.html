<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Javascript learning</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        input {
            border-color: black;
            font-weight: normal;
            border-radius: 10px;
            width: 200px;
            height: 30px;
            text-indent: 10px;
            margin-top: 15px;
        }
        .invalid-rule {
            color: crimson;
            font-weight: bold;
            text-decoration: underline;
        }
        .valid-rule {
            color: darkgreen;
            font-weight: normal;
            text-decoration: line-through;
        }
        .invalid {
            border-color: crimson;
            background-color: crimson;
            color: white;
            font-weight: bold;
        }
        .valid {
            border-color: darkgreen;
            background-color: darkgreen;
            color: white;
            font-weight: bold;
        }
        .container {
            display: flex;
            height: 100%;
        }
        .menu {
            min-width: 100px;
            max-width: 200px;
            /*display: block;*/
            border-style: double;
            border-radius: 15px;
            padding-top: 10px;
            padding-left: 10px;
        }
        .content {
            width: 100%;
            display: flexbox;
            border-style: double;
            border-radius: 15px;
            padding-top: 10px;
            padding-left: 10px;
        }
        .btn {
            border-radius: 10px;
            font-weight: bold;
            border-style: double;
            border-spacing: 5px;
            height: 50px;
            padding: 15px;
            cursor: pointer;
        }
        .btn:hover {
            background-color: black;
            color: white;
        }
        .wip {
            background-color: crimson;
            color: white;
            border-color: white;
        }
        .wip:hover {
            background-color: white;
            color: crimson;
            border-color: crimson;
        }
        .released {
            background-color: darkgreen;
            color: white;
            border-color: white;
        }
        .released:hover {
            background-color: white;
            color: darkgreen;
            border-color: darkgreen;
        }
    </style>
    <script>
        const col = 10;
        const val = 10;
        const danger = 'class="wip"';
        const resetContent = '&nbsp;<a href=\"#\" onclick=\"WriteInContent(\'\');\"><small>Reset field</small></a>';
        function WriteInTag(word, method) {
            switch(method) {
                case 'open-table':
                    return '<table border="1">';
                case 'close-table':
                    return '</table>';
                case 'open-tr':
                    return '<tr>';
                case 'close-tr':
                    return '</tr>';
                case 'in-th':
                    if(word == 0) return '<th></th>';
                    else return '<th>'+ word + '</th>';
                case 'in-td':
                    return '<td>'+word+'</td>';
                case 'in-td-check':
                    if(word > val) return '<td ' + danger + '>' + word + '</td>';
                    else return '<td>' + word + '</td>';
            }
        }
        function WriteInContent(word) {
            var content = document.getElementById('content');
            content.innerHTML = word;
        }
        function ShowMTableOld() {
            var content = '<h3>Multiplication table' + resetContent +'</h3>';
            content += WriteInTag('','open-table');
            content += WriteInTag('', 'open-tr');
            for (let i = 0; i <= 10; i++) {
                content += WriteInTag(i, 'in-th');
            }
            content += WriteInTag('', 'close-tr');

            for (let i = 1; i <= 10; i++) {
                content += WriteInTag('', 'open-tr');
                for (let j = 0; j <= 10; j++) {
                    if(j == 0) content += WriteInTag(i, 'in-th');
                    else if(j == col) content += WriteInTag(i*j, 'in-td-check');
                    else content += WriteInTag(j*i, 'in-td');
                }
                content += WriteInTag('', 'close-tr');
            }
            content += WriteInTag('', 'close-table');
            WriteInContent(content);
        }
        function ShowGapOld() {
            const success = 'class="released"';
            let content = '<h3>Gapful numbers' + resetContent +'</h3>';
            content += '<table border="1">';
            for (let i = 100; i < 1000; i++) {
                  let first = Math.floor(i / 100);
                  let second = Math.floor((i - first * 100) / 10);
                  let third = i % 100 % 10;
                  let result = i % (first * 10 + third);
                  if(result == 0) content += '<tr '+ success + '><td>' + first + '</td><td>' + second + '</td><td>' + third + '</td></tr>';
                  else content += '<tr><td>' + first + '</td><td>' + second + '</td><td>' + third + '</td></tr>';
            }
            content += '</table>';
            WriteInContent(content);
        }
        function ShowCollatzOld() {
            let number = prompt('Set integer', 120);
            let content = '<h3>Collatz Conjecture' + resetContent + '</h3><ol>';
            let k = 0;
            do {
                if (number % 2 == 0) {
                    content += '<li>' + number + ': is even => ' + number + ' \/ 2 = ';
                    number /= 2;
                    content +=number + '</li>';
                }
                else {
                    content += '<li>' + number + ': is odd => ' + number + ' * 3 + 1 = ';
                    number *= 3;
                    number++;
                    content +=number + '</li>';
                }
            } while (number != 1)
            content += '<li>' + number + ': is finish!</li>';
            content += '</ol>';
            WriteInContent(content);
        }
        function ShowMTableNew() {
            let content = document.getElementById('content');
            let header = document.createElement('h3');
            header.innerHTML = 'Multiplication table' + resetContent;
            content.appendChild(header);
            let tbl = document.createElement('table');
                tbl.style.borderColor = '#000';
                tbl.cellPadding = 0;
                tbl.cellSpacing = 0;
                tbl.border = 1;
            for (let i = 0; i <= 10; i++) {
                let tr = document.createElement('tr');
                tbl.appendChild(tr);
                for (let j = 0; j <= 10; j++) {
                    if(i == 0 && j == 0) {
                        let th = document.createElement('th');
                        th.textContent = '';
                        tr.appendChild(th);
                    }
                    else if(j == 0 && i != 0) {
                        let th = document.createElement('th');
                        th.textContent = i;
                        tr.appendChild(th);
                    }
                    else if(j != 0 && i == 0) {
                        let th = document.createElement('th');
                        th.textContent = j;
                        tr.appendChild(th);
                    }
                    else if((i != 0 && j != 0) && i == j) {
                        let td = document.createElement('td');
                        td.style.backgroundColor = 'blue';
                        td.style.color = '#fff';
                        td.style.fontWeight = 'bold';
                        td.style.textAlign = 'center';
                        td.style.padding = '15px';
                        td.textContent = i * j;
                        tr.appendChild(td);
                    }
                    else {
                        let td = document.createElement('td');
                        td.textContent = i * j;
                        tr.appendChild(td);
                    }
                }                
            }
            content.appendChild(tbl);
        }
        function ShowGapNew() {
            let content = document.getElementById('content');
            let header = document.createElement('h3');
            header.innerHTML = 'Gapful numbers <sup>(only)</sup> between 100 and 999' + resetContent;
            content.appendChild(header);
            let ul = document.createElement('ul');
            for (let i = 100; i <= 999; i++) {
                let firstNum = Math.floor(i / 100);
                let secondNum = Math.floor((i - firstNum * 100) / 10);
                let thirdNum = i % 100 % 10;
                let gap = i % (firstNum * 10 + thirdNum);
                if (gap == 0) {
                    let li = document.createElement('li');
                    li.innerHTML =i + ' is gapful because ' + '<b>' + firstNum + '</b>' + secondNum + '<b>' + thirdNum + '</b>\/<b>' + '' + firstNum + thirdNum + '</b>=' + (i / (firstNum * 10 + thirdNum));
                    ul.appendChild(li);
                }
            }
            content.appendChild(ul);
        }
        function ShowCollatzNew() {
            let content = document.getElementById('content');
            let header = document.createElement('h3');
            header.innerHTML = 'Collatz conjecture ' + resetContent;
            content.appendChild(header);
            let ol = document.createElement('ol');
            let i = prompt('Enter number', 125);
            do {
                let li = document.createElement('li');
                if (i % 2 == 0) {
                    li.innerHTML = i + ' is even => ' + i + ' % 2 = ';
                    i /= 2;
                    li.innerHTML += i;
                }
                else {
                    li.innerHTML = i + ' is odd => ' + i + ' * 3 + 1 = ';
                    i *= 3;
                    i++;
                    li.innerHTML += i;
                }
                ol.appendChild(li);
            } while (i != 1);
            let li = document.createElement('li');
            li.innerHTML = '1 is finish!';
            ol.appendChild(li);
            content.appendChild(ol);
        }
        function CreateRegisterForm() {
            let content = document.getElementById('content');
            
            let form = document.createElement('form');
            form.addEventListener('submit', Validate);

            let username = document.createElement('input');
            username.id = 'userName';
            username.type = 'text';
            username.placeholder = 'User name';
            form.appendChild(username);
            
            let br = document.createElement('br');
            form.appendChild(br);

            let password = document.createElement('input');
            password.id = 'password';
            password.type = 'password';
            password.placeholder = 'Password';
            form.appendChild(password);

            form.appendChild(br);
            
            let confirm = document.createElement('input');
            confirm.id = 'confirm';
            confirm.type = 'password';
            confirm.placeholder = 'Confirm';
            form.appendChild(confirm);

            form.appendChild(br);

            let submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.classList.add('btn','released');
            submitButton.textContent = 'Submit';
            form.appendChild(submitButton);

            content.appendChild(form);

            let result = document.createElement('ul');
            result.style.display = 'block';
            result.style.borderColor = 'rgb(110, 110, 110)';
            result.style.borderRadius = '10px';

            let unameWrongLength = document.createElement('li');
            unameWrongLength.textContent = 'User name must be at least 4 characters';
            unameWrongLength.id = 'unameWrongLength';
            result.appendChild(unameWrongLength);

            let passwordWrongLength = document.createElement('li');
            passwordWrongLength.textContent = 'Password must be at least 8 characters';
            passwordWrongLength.id = 'passwordWrongLength';
            result.appendChild(passwordWrongLength);

            let confirmError = document.createElement('li');
            confirmError.id = 'confirmError';
            confirmError.textContent = 'Password and confirm password must be identical';
            result.appendChild(confirmError);

            content.appendChild(result);
        }
        function ClearInputclassList(object) {
            object.classList.remove('invalid');
            object.classList.remove('valid');
        }
        function ClearResultclassList(object) {
            object.classList.remove('invalid-rule');
            object.classList.remove('valid-rule');
        }
        function Validate() {
            let username = document.getElementById('userName');
            let password = document.getElementById('password');
            let confirm = document.getElementById('confirm');
            let unameWrongLength = document.getElementById('unameWrongLength');
            let passwordWrongLength = document.getElementById('passwordWrongLength');
            let confirmError = document.getElementById('confirmError');

            ClearInputclassList(username);
            ClearInputclassList(password);
            ClearInputclassList(confirm);
            ClearResultclassList(unameWrongLength);
            ClearResultclassList(passwordWrongLength);
            ClearResultclassList(confirmError);

            if(username.value.length < 3) {
                username.classList.add('invalid');
                unameWrongLength.classList.add('invalid-rule');
            }
            else {
                username.classList.add('valid');
                unameWrongLength.classList.add('valid-rule'); 
            }

            if(password.value.length < 8) {
                password.classList.add('invalid');
                passwordWrongLength.classList.add('invalid-rule');
            }
            else {
                password.classList.add('valid');
                passwordWrongLength.classList.add('valid-rule');
            }

            if(password.value != confirm.value) {
                confirm.classList.add('invalid');
                confirmError.classList.add('invalid-rule');
            }
            else {
                confirm.classList.add('valid');
                confirmError.classList.add('valid-rule');
            }

            return false;
        }
    </script>
</head>
<body>
    <div class="container">
    <div class="menu">
        <h3>Menu</h3>
        <hr />
        <h2>First try</h2>
        <button class="btn released" onclick="ShowMTableOld();">Show multiplication table</button>
        <button class="btn released" onclick="ShowGapOld();">Show gapful numbers</button>
        <button class="btn released" onclick="ShowCollatzOld();">Show Collatz Conjecture</button>
        <h2>With DOM</h2>
        <button class="btn released" onclick="ShowMTableNew();">Show multiplication table</button>
        <button class="btn released" onclick="ShowGapNew();">Show gapful numbers</button>
        <button class="btn released" onclick="ShowCollatzNew();">Show Collatz conjecture</button>
        <button class="btn wip" onclick="CreateRegisterForm();">Validation form</button>
        <h2>In progress</h2>
        <button class="btn wip">Josephus problem</button>
        </ul>
    </div>
    <div class="content">
        <div id="content">
        </div>
    </div>
    </div>
</body>
</html>